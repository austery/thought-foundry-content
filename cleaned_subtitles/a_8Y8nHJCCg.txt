计算机从发明之初 计算能力就像坐火箭一样 一直在疯狂飙升 但再强大的算力也是有限的 在无穷无尽的宇宙面前就是沧海一粟 只不过困住我们的不是宇宙的大 而是它的不确定性 看过《三体》的观众应该能理解混沌理论的威力 微小的误差会被指数级放大 让你的计算结果和真实结果有天壤之别 直到有一天 有一个天才想到了一个天才的做法 如果过程是难以计算的 那我不如干脆不计算过程，只模拟结果 通过大量的随机模拟获得大量的数据 再从统计学的角度找到最接近真相的答案 这就是蒙特卡罗模拟 现代科学史上最赖皮，也是最有用的算法之一 时间回到1945年 在成功投出胖子和小男孩之后 美国人马上开始更复杂的核武研发 但是在计算原子内部的能量时 因为不确定性原理的影响 中子的移动轨迹、原子核的撞击 撞击所带出的能量等等 都无法精确计算 研发由此陷入了瓶颈 而负责这项任务的物理学家Ulam 某天在家里打牌时 想用自己聪明的数学知识计算不同牌型发出来的概率 后来他发现这样太麻烦了 还不如直接发100次牌 然后统计一下发出来的牌型 也能得出一个相当接近的答案 Ulam由此灵机一动 这个做法好像也能用在自己的工作上？ 随后他和冯诺依曼成立了一个秘密项目 项目代码就取自于著名的蒙特卡罗赌场 借助着世界上第一台计算机ENIAC 他们在1948年第一次完成对粒子运动的蒙特卡罗模拟 成功地突破了计算瓶颈 也为三年后引爆的世界上第一个氢弹奠定了理论基础 如果说核物理这种东西的专业程度太高 让你感觉太遥远太陌生 那么蒙特卡罗模拟在统计学上的应用就非常平易近人了 比如我们逢年过节都会玩的抛硬币 掷色子 打扑克等 本质上都是概率游戏 都可以通过蒙特卡罗模拟获得非常精准的答案 抛硬币的正面概率是多少？ 你抛个100次左右就有眉头了 掷6个骰子刚好是1-6的可能性有多大呢？ 你掷个1万次就明白了 开局发牌直接发出同花顺的可能性？ 呃......这个你可能得发1,000万次 才能够得到比较靠谱的结果 万幸的是 和Ulam一样，我们可以借助计算机的能力 用编程去代替人手进行模拟 我们开始对抛硬币进行蒙特卡罗模拟 在这里我分别模拟了从100次到100万次的抛硬币过程 在模拟的过程中 正面的概率会被实时绘制在图表上 可以看到，随着模拟的进行 概率曲线在0.5上下来回波动 在100次和1,000次的模拟中 波动的幅度还是挺大的 而且离理论上的五五分还有点距离 而从1万、10万到100万次模拟的波动曲线可以看出 模拟越是深入，波动的幅度越小 曲线在后面几乎和0.5的直线融为一体 在100万次的模拟中 我们甚至要把曲线图放大100倍才能够看得出它的波动轨迹 这也解释了一个问题： 为什么大数定律、中心极限定理 这些在18世纪已经被提出来的数学理论 直到第二次世界大战结束后 才衍生出蒙特卡洛模拟这种具有实际应用的算法呢？ 因为我们在等的不是算法 而是算力 我们等了200年才等到第一台计算机的出现 才第一次看到了那个量变引起质变的效果 有了无穷的算力 我们就能用蒙特卡罗模拟 对一些平常需要复杂的方程和推算的问题 进行无情的暴力破解 回到前面提到的那两个问题 投掷6个骰子能出现1-6的概率有多高？ 开局发5张牌，能发出同花顺的概率有多高？ 如果你在概率学的课堂上认真听课了 稍微思考一下 应该能写出正确的公式 算出正确的答案 但现在有了蒙特卡罗模拟 就不需要费那么多脑细胞了 我们直接通过代码构建整个游戏 然后简简单单地模拟1,000万次 答案就呼之欲出 问题越复杂，蒙特卡罗模拟的优势就越大 假如我们要计算同花和顺子的概率 它的复杂度就会比同花顺高一点 但我相信在座的各位还是能够写出正确的公式 但就是得花更多的时间，更仔细的推理了 而通过代码进行模拟 我们只需要简单的调整一下检查发牌结果的逻辑即可 这里再次体现了蒙特卡罗模拟的核心价值 当问题的路径变长，维度增加 根据原理推导的公式会越来越复杂 计算量和计算难度也会越来越大 而通过模拟 我们唯一要做的就是把模拟场景搭建好 计算的难度和复杂度就会基本不变 蒙特卡罗模拟的强大之处在于 它是一个非常通用的算法 只要有大量的分布符合规律的随机取样 就能确保样本具有足够的代表性 样本的结果自然也能足够接近真实结果 所以我们可以用它来攻克量子物理、流体力学 这些因为自然法则的影响 导致计算难度超出人类能力范围的问题 也可以用来计算衍生品定价、投资组合 这些因为可能性太多，根本列不完 更别说一个个去分析的金融问题 还有那些因为计算量过大 从时间和成本上来说都算不完的问题 也都可以通过随机取样只算一小部分 得到准确的结果 最后这个做法 就被用在大家最喜欢的光追（Ray Tracing）和DLSS技术中 哎 你不会真的以为老黄会把每个光源在每个物体的每个像素的每个折射都计算一遍吧 如果是那样 显卡的价格后面再加一个零也是不够的 最后，如果你想自己动手复现一下视频里的蒙特卡罗模拟 我会把代码分享到Disco粉丝群里 那么最后的最后 让我们make simulation great again，拜拜