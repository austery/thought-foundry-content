。 上期视频，我为大家演示了在谷歌中agsk ills的基础用法。视频发布后，很多朋友在问agsk ills是否有更高级的玩法，从而能够提升开发效率？。答案是肯定的，而且效果非常不错。本期视频，我将为大家演示agsk ills生态中被开发者称为灵魂技术的核心技巧决策术。本期视频我们要讲的决策术不是机器学习里的那个需要训练数据的算法，而是一种需要在sm文件里嵌入结构化的ife. Lse决策逻辑，让cloud code、 xI等AI智能体在执行任务，是具备真正的自主决策的高级能力。因为我们在用还有cloud code执行特定任务的时候，AI编程助手经常问，下一步该怎么做？，让原本应该自动化完成的工作流变成了人机问答。，而决策术就是解决这个问题的终极方案。根据官方文档。 ag是通过mark文件教会AI ag如何完成特定任务？，而决策书优化就是在这个markdown文件中显示定义条件、分支优先级排序，还有异常处理，从而让AI编程助手能够自主判断，自主选择最佳方案，从而减少50 %到80 %的手动干预，能大幅提升I编程助手的智能度。，还有任务完成效率。为agents kills,实现决策数，。这是目前社区公认的最强大的agents kills的高级技巧。而且，本期视频为大家演示的技巧，不仅适用于gravity，还适用于cloud code,还有code ex等任何支持agent的I编程助手。而且我会用一个我亲自开发的使用决策术方式，实现代码审查的ag进行演示。这个叫它等I编程助手智能判断我们的代码变更类型，自动路由到最适合的代码审查工具。 在这个ki中，我添加了jaman CI以及code ex CI,然后AI编程助手，就会根据任务的复杂度来自主决策。，是选择jaman cI还是选择code exc I用于代码审查。因为平时我们在进行项目开发的时候，大家经常习惯使用code ex或者man I.对我们使用cloud code或者gravity写的代码进行代码审查。由于code ex进行代码审查的时候，速度非常慢。所以对于复杂的变更或者后端技术站，大家才会选择code ex进行代码审查。，而且前端代码的时候，更适合使用jaman进行代码审查。让AI编程助手自主判断是使用jaman cI进行代码审查。，还是使用code ex I进行代码审查。像这样的话，就不需要我们手动去干预或者手动去确认，让ant gravity或者cloud code自主决策。，选择哪个工具？。像这样的话，不仅能让代码审查更加专业，还能解决一个非常令人头疼的问题。那就是所有任务都用。 内置的这些模型去实现，这样就会非常消耗antigravity的token额度。但我们如果将一些任务分配给jaman CI或者code exc LI像，这样就能实现大幅度节省gravity的用量。在视频开始前，先为大家简单讲解一下什么是决策数，以便让不懂编程或者不懂机器学习的用户能够理解我们为什么要在agsk ills中使用决策数的方式。，简单来说，决策数就是通过层层的if that条件判断，从根节点到业结点逐步筛选，最终得出确定性决策结果的树状逻辑结构。在这里我举了一个最简单的例子，以便大家能够理解，根据天气预报是否有雨进行决策。当天气预报预报有雨的时候，判断是否会下大雨。如果下大雨，那么就带雨伞。如果不下大雨，那么就带折叠伞。如果天气预报预报的没有雨的话，那么就可以根据外出时间进行判断。外出时间长的话，。 可以带一件外套。，外出时间不长的话，那么就不用带任何伞，也不用带外套。好，这是一个最简单的决策术的案例。好，下面为大家演示一下，。我们在ant gravity中使用，我创建了这个用于代码审查的具备决策术能力的ag的效果。，我将这个放在了项目路径。因为无论是还是cloud code,他们都优先加载项目路径下的sl l。因为这个ski是用于代码审查，。所以我们让它在我们当前这个已有的项目上，让它添加一个功能，以便测试这个代码审查的s它的效果。这个当前项目是我开发的一个me浏览器的插件，这个插件的功能，就是一个定时任务的功能。然后我们可以点击这个插件的图标，查看一下这个插件的功能。，这是我设置的定时任务。当时间到了我设置的这个时间之后，它就会自动打开我设置的对应的目标网站，然后在目标网站根据提示词来搜索与AI相关的这些新闻。比如说我设置。 这个定时任务现在虽然没到时间，但我们可以点击这个执行按钮，让它立即来执行。然后我们可以测试一下。，我这里点击执行，点击之后，它就打开了我设置的这个group，然后在group中自动输入了。我给它预设的提示词，然就会根据任务来搜索这些相关的AI资讯。在这个插件中，我们可以看到这里有这个日志功能。，然后我们可以让它新增一个点击这个日志。，就会在浏览器中自动打开这个AI的对话记录。所以在gravity中，我们就可以输入，我们要实现了这个任务。我输了提示词是为这个me扩展。，新增一个点击日志中的条目，就可以在浏览器中打开对应的任务记录。，然后这里我还给它举了一个例子。，在模型这里我们这里就选择cloud 4.5，。然后我们点击发送。当它完成这个功能新增之后，我们就可以测试这个代码审查的效果。好，这里它开始修改这个代码。，这里我们要稍等一下。，这里提示这个功能已经完成。 下面我们就可以调用这个agsk ill进行测试。为了方便调用，我将这个ski做成了斜杠命令。，我们直接输入斜杠，这里就会出现这个review。然后我们直接选择这个review，直接点击发送就可以。好，。这里它就提示它将使用代码审查工具进行审查。好，可以看到这里，它正在决策。，到底是使用jamin,还是使用code ex进行代码审查。好，这里提示它现在分析复杂度，并且执行审查。然后这里是代码审查路由分析，这里检测到更改，包括9个文件，它对代码更改的复杂度给出了一个评分，然后十分给出了3分，也就是比较简单，更改的代码数小于300行。因为这个代码变更的复杂度非常小，所以这里它就给出了决策，它要使用jamin I对变更的代码进行审查。，纯前端JS更改复杂度低，无敏感代码，无数据库或API更改。然后这里正在执行审查。为了检测这个代码审查的skill，它的智能程度，当它开始调用min。 我就将网立即断掉了。，然后这里它就开始提示ja I遇到了错误，现在它需要使用code ex LI作为备选方案，然后我们这里就允许它执行。像这样的话，它能根据代码的复杂程度，智能的选择使用ja或者ex.当它选择LI出现网络问题之后，它就开始选择code ex LI作为备选方案。这样的话，它就能通过决策数来智能的选择对应的代码审查工具，。这里提示code ex审查完成。好，这里输出了这个审查报告，。然后这里给出了一个性能问题，。这里还给出了一个安全问题。这里还给出了建议修复。，下面我们就可以在输入框中让它根据审查报告，对代码进行修复。，然后我们直接点击发送。像这样的话，我们就实现了在中通过斜杠命令来智能的调用ja LI或者code exc LI对这些变更的代码进行审查。，就能让我们的项目代码变得更加完善，更加稳健。这里生成了修复总结。下面我们。 回到me浏览器中测试一下。，在me浏览器中，我们让它再次执行一下这个任务。这里它自动输入，并且自动点击了发送。好，这里lock正在执行，。我们看一下它是否记录到了这个对话。，我们点击日志，。当前这个日志，这里就有这个查看对话。好，下面我们就可以详细看一下我创建了这个它是如何实现决策数的。，我们可以先看一下这个代码审查agents kill它的执行的流程图。当对代码变更进行审查的时候，它会首先判断是否是get仓库。如果不是get仓库的话，会运行get命令。当满足是get仓库的时候，就会判断man LI和code exc LI是否可用。如果都不可用，就会安装jaman. I和如果只有一个可用，就会直接使用当前这个可以使用的CLI,两者都可用的话，那么就会运行到这一步。分析ge,然后判断是否有变更，如果没有变更，就无需进行审查。然后如果有变更，就会到第三。 计算复杂度进行评分，。然后这里是评分规则，然后到这一步就开始进行决策。这里就是硬性规则，匹配。如果匹配到code ex规则，比如说代码中包含敏感的文件或代码，文件数大于20,或者行数大于500行，还有数据库迁移API服务层修改，还有跨三个顶级目录，还有复杂的TS范型，像。这样的话就会通过code ex进行审查。然后ja的审查规则是纯前端的代码，或者是thon生态，或者是纯文档，。如果是这些简单的内容，就会由jamin进行审查。当这个得分大于等于6的时候，就会由code ex对这些高复杂度的代码进行深度分析。然后当得分小于6的时候，它属于中等或者简单的任务，就会由jamin LI进行分析。，然后这里是默认使用jamin LI进行快速反馈循环。当判断好选择code ex CLI还是jamin LI的时候，就开始执行代码审查。到这一步就会判断。 是否执行成功？，当失败的时候，就会尝试调用备用的。比如说刚才我们调用jaman LI的时候，我故意将网关掉了，然后它就会调用备用的code exc I再次执行代码审查。当执行完成之后，这里就会结束。下面我们就回到gravity,详细看一下这个代码审查的ki里的这些内容。，这里就是这个s的名称。，这里就是这个ski的描述。，在这里我们就列出了什么时候不使用这个技能。，下面就开始进入流程，这是第一步环境检查，也就是检查是否有get仓库对应我们这个流程图上的这一步。，。然后到这一步就检查man I和code ex LI是否可用。，就对应我们刚才看到的这一步，。然后到第三步的时候，就是来分析get对应流程图上的这一步。当没有变更的时候，就直接报告没有变更。，然后到这一步就开始对复杂度进行评分。这里面给出了多种评分方式，也就是对应流程图上的这一个流程。然后这一步就是。 测语言还有框架，就对应我们流程图上的检测语言框架，还有安全性等方面的这个流程。然后到这一步就开始进行路由决策。因为这些内容比较多，所以这里我们就不再具体去看了。，也就是对应图上刚才我们查看的这一步路由决策数，它会根据这些规则来判断是选code ex I还是选I到这一步，就是执行代码审查。在这里，我们设置了ja LI,它能执行哪些命令？。，然后code ex I,它能执行哪些命令？，对应流程图，就是这里执行代码审查。然后在这一步就是判断是否执行成功。，也就是对应示意图上的这一步，当执行失败的时候，就会报告这个失败。，然后尝试切换另一个CLI进行执行。然后这一步就是格式化输出，也就是对应图上的这一个执行流程。像这样的话，这个用了决策数的，它就能让gravity或者让cloud code等AI编程。 具备自主决策的能力。最后再为大家演示一下，我们如何将这个skill在这个对话框通过斜杠命令快速调出。像这个方式非常简单。首先我们要确保我们已经在当前的工作路径设置好了我们的ag.下面我们点击右上方这三个点，然后点击自定义，再点击这个workflow，然后再点击这个workspace，。然后我们新建一个工作流。点击之后，这里我们给工作流命个名称，。比如说review输入好之后，按下键，然后这里就会弹出这个输入框，。这里有这个描述的输入框，在描述这里我输入的就是代码审查，遵循团队标准，。然后在下面的这个内容，这里在这里我输入的就是代码审查工作流。然后这里我用了艾符号来引用了我们这个用于代码审查的这个skill，。这里要求它将这个代码审查里的指南用于所有的目标文件，。这里输入的就是审查用户指定的文件，没有指定，则不审查。在最后这里就是让它创建。 严重程度分类的审查结果的弓件。当描述和内容创建好之后，。然后在antigravity的这个输入框，我们直接输入斜杠命令加这个review，我们就可以成功通过这个工作流的方式来调用。我们设置好了这个skill。由于时间有限，。本期视频只为大家演示了用于代码审查的skill，大家也可以将决策术的agents kills,用于更多场景。本期视频所用到的代码和笔记，我都会放在视频下方的描述栏或者评论区。好，。本期视频就做到这里，欢迎大家点赞、关注和转发。，谢谢大家观看。 。